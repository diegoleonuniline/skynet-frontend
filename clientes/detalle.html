<!DOCTYPE html>
<html lang="es" data-theme="dark">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Skynet - Client Profile</title>
  <link rel="icon" href="data:,">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="../css/global.css">
  <link rel="stylesheet" href="detalle.css">
</head>
<body>

<div class="app">
  <div class="sidebar-overlay" onclick="toggleSidebar()"></div>
  
  <aside class="sidebar">
    <div class="sidebar__header">
      <div class="sidebar__logo">
        <span class="material-symbols-outlined">hub</span>
      </div>
      <div class="sidebar__brand">
        <span class="sidebar__title">Skynet</span>
        <span class="sidebar__subtitle">ISP Management</span>
      </div>
    </div>

    <nav class="sidebar__nav">
      <a href="/skynet-frontend/dashboard/" class="sidebar__link">
        <span class="material-symbols-outlined">dashboard</span>
        <span>Dashboard</span>
      </a>
      <a href="/skynet-frontend/clientes/" class="sidebar__link active">
        <span class="material-symbols-outlined">group</span>
        <span>Clients</span>
      </a>
      <a href="#" class="sidebar__link">
        <span class="material-symbols-outlined">inventory_2</span>
        <span>Inventory</span>
      </a>
      <a href="#" class="sidebar__link">
        <span class="material-symbols-outlined">payments</span>
        <span>Billing</span>
      </a>
      <a href="#" class="sidebar__link">
        <span class="material-symbols-outlined">support_agent</span>
        <span>Support</span>
      </a>
      
      <div class="sidebar__divider"></div>
      
      <a href="#" class="sidebar__link">
        <span class="material-symbols-outlined">settings</span>
        <span>Settings</span>
      </a>
      <a href="#" class="sidebar__link" onclick="cerrarSesion(); return false;">
        <span class="material-symbols-outlined">logout</span>
        <span>Logout</span>
      </a>
    </nav>
  </aside>

  <main class="app__main">
    <header class="header">
      <div class="header__search">
        <span class="material-symbols-outlined header__search-icon">search</span>
        <input type="text" class="header__search-input" placeholder="Search clients...">
      </div>

      <div class="header__actions">
        <button class="header__btn" onclick="toggleTheme()">
          <span class="material-symbols-outlined">dark_mode</span>
        </button>
        <button class="header__btn">
          <span class="material-symbols-outlined">notifications</span>
          <span class="header__btn-badge"></span>
        </button>
        <div class="header__divider"></div>
        <div class="header__user">
          <div class="header__user-info">
            <p class="header__user-name" id="usuarioNombre">Admin</p>
            <p class="header__user-role" id="usuarioRol">Administrator</p>
          </div>
          <div class="header__user-avatar" id="usuarioAvatar">A</div>
        </div>
      </div>
    </header>

    <div class="app__content">
      <nav class="breadcrumb">
        <a href="/skynet-frontend/clientes/">Skynet Customers</a>
        <span class="material-symbols-outlined breadcrumb__separator">chevron_right</span>
        <span class="breadcrumb__current">Client Detail</span>
      </nav>

      <!-- Profile Card -->
      <div class="profile-card">
        <div class="profile-card__main">
          <div class="profile-card__avatar" id="clienteAvatar">--</div>
          <div class="profile-card__info">
            <div class="profile-card__name">
              <h1 id="clienteNombre">Loading...</h1>
              <span class="profile-card__badge" id="clienteEstado">--</span>
            </div>
            <div class="profile-card__meta">
              <span id="clienteEmail"><span class="material-symbols-outlined">mail</span> --</span>
              <span id="clienteDireccion"><span class="material-symbols-outlined">location_on</span> --</span>
            </div>
          </div>
        </div>
        <div class="profile-card__actions">
          <button class="btn btn-primary" onclick="registrarPago()">
            <span class="material-symbols-outlined">payments</span>
            Register Payment
          </button>
          <button class="btn btn-secondary" onclick="editarCliente()">
            <span class="material-symbols-outlined">edit</span>
            Edit Profile
          </button>
        </div>
      </div>

      <!-- Stats -->
      <div class="detail-stats">
        <div class="detail-stat">
          <div class="detail-stat__header">
            <span class="detail-stat__label">Monthly Rate</span>
            <div class="detail-stat__icon detail-stat__icon--blue">
              <span class="material-symbols-outlined">price_check</span>
            </div>
          </div>
          <p class="detail-stat__value" id="cuotaMensual">$0.00 <small>/mo</small></p>
          <p class="detail-stat__sub" id="planNombre">Plan: --</p>
        </div>
        <div class="detail-stat">
          <div class="detail-stat__header">
            <span class="detail-stat__label">Current Balance</span>
            <div class="detail-stat__icon detail-stat__icon--green">
              <span class="material-symbols-outlined">account_balance_wallet</span>
            </div>
          </div>
          <p class="detail-stat__value" id="saldoActual">$0.00</p>
          <p class="detail-stat__sub" id="estadoCuenta">Account Up to date</p>
        </div>
        <div class="detail-stat">
          <div class="detail-stat__header">
            <span class="detail-stat__label">Next Due Date</span>
            <div class="detail-stat__icon detail-stat__icon--amber">
              <span class="material-symbols-outlined">calendar_month</span>
            </div>
          </div>
          <p class="detail-stat__value" id="proximoCorte">--</p>
          <p class="detail-stat__sub" id="diasRestantes">--</p>
        </div>
      </div>

      <!-- Tabs -->
      <div class="detail-tabs">
        <button class="detail-tabs__btn active" data-tab="equipos">Equipment</button>
        <button class="detail-tabs__btn" data-tab="historial">Account Statement</button>
        <button class="detail-tabs__btn" data-tab="documentos">Documents</button>
      </div>

      <!-- Content Grid -->
      <div class="detail-grid">
        <div class="detail-grid__main">
          <!-- Equipment Panel -->
          <div class="card detail-panel active" id="panel-equipos">
            <div class="card__header">
              <div class="card__title">
                <span class="material-symbols-outlined">router</span>
                Skynet Installed Equipment
              </div>
              <button class="btn btn-sm btn-secondary">Manage All</button>
            </div>
            <div class="table-container">
              <table class="table">
                <thead>
                  <tr>
                    <th>Device</th>
                    <th>MAC Address</th>
                    <th>Serial No.</th>
                    <th>Status</th>
                  </tr>
                </thead>
                <tbody id="tablaEquipos">
                  <tr><td colspan="4" class="text-center text-muted">Loading...</td></tr>
                </tbody>
              </table>
            </div>
          </div>

          <!-- Transactions Panel -->
          <div class="card detail-panel" id="panel-historial">
            <div class="card__header">
              <div class="card__title">
                <span class="material-symbols-outlined">receipt_long</span>
                Skynet Transaction History
              </div>
              <button class="btn btn-sm btn-secondary">View Statement</button>
            </div>
            <div class="card__body" id="listaPagos">
              <p class="text-center text-muted">Loading...</p>
            </div>
          </div>

          <!-- Documents Panel -->
          <div class="card detail-panel" id="panel-documentos">
            <div class="card__header">
              <div class="card__title">
                <span class="material-symbols-outlined">folder</span>
                Documents
              </div>
            </div>
            <div class="card__body">
              <div class="empty-state">
                <span class="material-symbols-outlined">folder_open</span>
                <p>No additional documents</p>
              </div>
            </div>
          </div>
        </div>

        <div class="detail-grid__side">
          <!-- INE Card -->
          <div class="card">
            <div class="card__header">
              <div class="card__title">
                <span class="material-symbols-outlined">badge</span>
                Identification (INE)
              </div>
            </div>
            <div class="card__body">
              <div class="ine-grid">
                <div class="ine-item">
                  <label>Front Side</label>
                  <div class="ine-box" id="ineFrente">
                    <span class="material-symbols-outlined">cloud_upload</span>
                    <span>Click to upload</span>
                  </div>
                </div>
                <div class="ine-item">
                  <label>Back Side</label>
                  <div class="ine-box" id="ineReverso">
                    <span class="material-symbols-outlined">add_photo_alternate</span>
                    <span>Upload Back Side</span>
                    <small>PNG, JPG up to 10MB</small>
                  </div>
                </div>
              </div>
              <button class="btn btn-secondary" style="width: 100%; margin-top: 16px;">
                <span class="material-symbols-outlined">download</span>
                Download All Docs
              </button>
            </div>
          </div>

          <!-- Support Card -->
          <div class="card support-card">
            <div class="card__header" style="border: none;">
              <div class="card__title" style="color: white;">
                <span class="material-symbols-outlined">help</span>
                Skynet Support
              </div>
            </div>
            <div class="card__body">
              <p style="font-size: 13px; color: rgba(255,255,255,0.7); line-height: 1.6; margin-bottom: 16px;">
                Quick contact information and support options for this customer.
              </p>
              <div class="support-info">
                <p><strong>Phone:</strong> <span id="clienteTelefono">--</span></p>
                <p><strong>Phone 2:</strong> <span id="clienteTelefono2">--</span></p>
              </div>
              <button class="btn btn-secondary" style="width: 100%; background: rgba(255,255,255,0.1); border: none;" id="btnWhatsApp">
                <span class="material-symbols-outlined">chat</span>
                Send WhatsApp
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>

<div class="toast-container" id="toastContainer"></div>

<script src="../js/auth.js"></script>
<script src="detalle.js"></script>
</body>
</html>
